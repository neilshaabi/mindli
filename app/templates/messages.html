{% extends 'layout.html' %}

{% block title %}
    Messages
{% endblock %}

{% block content %}

    <div class='container'>
        
        <div class='row mb-3 g-4'>
            <div class='col-lg-12'>
                <h3>Messages</h3>
            </div>
        </div>
    
        <div class="row g-4">

            <div class='col-lg-4'>
                
                <div class='my-card'>
                    <h3>Recent conversations</h3>
                    {% for conversation in conversations %}
                        <p>{{ conversation.id }}</p>
                        <p>{{ conversation.other_user.first_name + ' ' + conversation.other_user.last_name }}</p>
                        {% if conversation.messages %}
                            <p>{{ conversation.latest_message_content | truncate(30, '...') }}</p>
                            <p>{{ conversation.time_since_latest_message }}</p>
                        {% else %}
                            <p>No messages yet</p>
                        {% endif %}
                        <hr>
                    {% endfor %}
                </div>
            </div>
            
            <div class='col-lg-8'>
                <div class='my-card'>

                </div>
            </div>
        
        </div>
    </div>
{% endblock %}
